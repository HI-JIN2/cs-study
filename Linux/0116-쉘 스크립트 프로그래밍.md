# 쉘 스크립트 프로그래밍 (0116)

## 1. 쉘 스크립트 개요 및 기본

### 1) 개요
*   **Shell Script**: 쉘 명령어를 모아 순차적으로 실행하는 인터프리터 언어.
*   **종류**: sh, bash (가장 널리 사용), zsh, ksh 등.
*   **Shebang**: `#!/bin/bash` (스크립트 첫 줄에 실행할 쉘 지정).
*   **실행**:
    *   `chmod +x script.sh` -> `./script.sh`
    *   `bash script.sh`

### 2) 변수 및 매개변수
*   **변수 선언**: `VAR="value"` (공백 금지).
*   **변수 사용**: `$VAR` 또는 `${VAR}`.
*   **위치 매개변수**:
    *   `$0`: 스크립트 이름.
    *   `$1`: 첫 번째 인자.
    *   `$#`: 인자 개수.
    *   `$@`: 모든 인자.
*   **특수 매개변수**:
    *   `$?`: 마지막 명령의 종료 코드 (0이면 성공).
    *   `$$`: 현재 프로세스 PID.

### 3) 제어문 (조건문 및 반복문)
*   **if 문**:
    ```bash
    if [ "$VAR" -eq 10 ]; then
        echo "Equal"
    else
        echo "Not Equal"
    fi
    ```
*   **case 문**: 다중 분기.
*   **for 문**:
    ```bash
    for i in {1..5}; do
        echo $i
    done
    ```
*   **while 문**: 조건이 참일 동안 반복.

### 4) 연산자
*   **문자열**: `=` (같음), `!=` (다름), `-z` (빈 문자열).
*   **숫자**: `-eq` (같음), `-ne` (다름), `-gt` (큼), `-lt` (작음).
*   **파일**: `-f` (파일 존재), `-d` (디렉토리 존재), `-e` (존재 여부).

## 2. 정규 표현식 및 주요 명령어

### 1) 정규 표현식 (Regular Expression)
*   문자열 패턴 매칭을 위한 표현식. grep, sed, awk 등에서 사용.
*   **메타문자**:
    *   `.`: 임의의 한 문자.
    *   `*`: 0회 이상 반복.
    *   `^`: 라인 시작.
    *   `$`: 라인 끝.
    *   `[]`: 문자 클래스 (예: `[a-z]`).

### 2) 스크립트 필수 명령어
*   **grep**: 패턴 검색. (`grep "error" log.txt`)
*   **find**: 파일 검색. (`find /var/log -name "*.log"`)
*   **sed**: 스트림 편집기 (문자열 치환 등). (`sed 's/old/new/g' file.txt`)
*   **awk**: 텍스트 데이터 처리 및 리포팅.
*   **date**: 날짜 및 시간 출력. (`date "+%Y-%m-%d"`)

### 3) 예제: 사용자 생성 스크립트
```bash
#!/bin/bash
# 사용자 목록과 비밀번호를 인자로 받아 계정 생성

if [ -n "$1" ] && [ -n "$2" ]; then
  UserList=($1)
  Password=($2)

  for (( i=0; i < ${#UserList[@]}; i++ )); do
    # 계정 존재 여부 확인
    if ! id "${UserList[$i]}" &>/dev/null; then
      sudo useradd -m "${UserList[$i]}"
      echo "${UserList[$i]}:${Password[$i]}" | sudo chpasswd
      echo "User ${UserList[$i]} created."
    else
      echo "User ${UserList[$i]} already exists."
    fi
  done
else
  echo "Usage: $0 \"user1 user2\" \"pass1 pass2\""
fi
```
