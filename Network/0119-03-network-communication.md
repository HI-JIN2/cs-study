# 네트워크 통신

### 1) 수신자의 범위에 따른 분류

- 종류 - 목적지 주소를 기준으로 구분

- Unicast
- Multicast
- Broadcast
- Anycast

- **Unicast**:

- 개요
1:1 통신
출발지와 목적지가 1:1 통신
- 용도
출발지 와 목적지가 명확이 하나로 정해져 있는 대부분의 통신은 유니캐스트

- **Broadcast**:

- 개요
1:전체 통신
동일 네트워크에 속한 모든 호스트가 목적지
- 용도
목적지 주소가 모든으로 표기되어 있는 통신 방식으로 유니캐스드로 통신하기 전에 상대방의 정확한 위치를 알기 위해 사용
주소 체계에 따라 브로드캐스트를 다양하게 분류할 수 있지만 기본 동작은 로컬 네트워크에서 모든 호스트에 패킷을 전달해야 할 때 사용

- **Multicast**:

- 개요
1:그룹(멀티캐스트 구독 호스트) 통신
하나의 출발지에서 특정 목적지 다수로 데이터를 전송
- 용도
멀티캐스트 그룹 주소를 이용해 해당 그룹에 속한 다수의 호스트로 패킷을 전송하기 위한 방식으로 IPTV 와 같은 실시간 방송을 볼 때 이 통신 방식을 이용
사내 방송이나 증권 시세 전송 과 같이 단방향으로 다수에게 동시에 같은 내용을 전달할 때 사용
화상 회의에도 이용

- **Anycast**:

- 개요
1:1 통신(목적지가 동일 그룹 내의 1개 호스트)
다수의 동일 그룹 중 가장 가까운 호스트에서 응답
IPv4에서는 일부 기능 구현
IPv6에서 모두 구현 가능
- 용도
애니캐스트 주소가 같은 호스트 들 중에서 가장 효율적으로 서비스 할 수 있는 호스트와 통신하는 방식인데 이런 애니캐스트 게이트웨이의 성질을 이용해서 가장 가까운 DNS 서버를 찾을 때 사용하거나 가장 가까운 게이트웨이를 찾는 애니캐스트 게이트웨이 기능에 사용

- **결론**:

- 최종 통신은 1:1 이라는 점을 보면 유니캐스트 와 애니캐스트가 동일하지만 통신할 수 있는 후보자는 서로 다른데 유니캐스트는 출발지 와 목적지가 모두 한 대 씩이지만 애니캐스트는 같은 목적지 주소를 가진 서버가 여러 대여서 통신 가능한 다수의 후보군이 있음

- 현재 주로 사용하고 있는 네트워크 주소 체계는 IPv4 기반인데 일부 모바일 네트워크와 데이터센터 위주로 새로운 IPv6 주소 체계가 사용되고 있는데 IPv6에서는 브로드캐스트가 존재하지 않고 링크 로컬 멀티캐스트로 대체되어 사용됨

- 링크 로컬 멀티캐스트

- 개요
같은 물리적 네트워크 안에 있는 특정 그룹의 장치들에게만 데이터를 전송하는 방식
링크 로컬은 라우터를 넘어가지 않는 동일한 로컬 네트워크 내로 범위를 한정

- 특징
범위 제한: 데이터가 라우터를 통과하지 못하기 때문에 오직 같은 스위치나 허브에 연결된 장치들끼리만 통신이 가능

네트워크 상의 장치들을 찾거나(Neighbor Discovery) 자동으로 설정을 주고 받을 때 주로 사용

브로드캐스트 와 다르게 해당 데이터를 받기로 설정된 그룹 멤버들에게만 전달되어 불필요한 트래픽을 줄임

- 사용 사례
IPv6 환경에서는 브로드캐스트가 존재하지 않기 때문에 링크 로컬 멀티캐스트가 그 역할을 대신 수행

주소 자동 설정(SLAAC - Stateless Address Autoconfiguration): 장치가 네트워크에 접속하자마자 자신의 존재를 알리거나 중복 주소를 확인할 때 사용
BOOTP 나 DHCP가 서버에게 주소를 할당받는 방식이라면 이 방식은 가이드를 받아서 스스로 주소를 만들어내는 방식
라우터에게 네트워크 주소를 물어보고 응답을 받으면 거기에 MAC Address를 붙여서 IPv6 주소를 생성
IoT 장치에 이용
IP 할당 내역이나 기업망, 엄격한 IP 관리가 필요한 곳에서는 DHCPv6를 사용합니다.

인근 장치 탐색(Neighbor Discovery): IPv4의 ARP 대신 상대방의 MAC 주소를 알아내기 위해서 멀티캐스트 메시지를 보낼 때 사용

- BUM Traffic

- 트래픽 종류에 대한 내용을 다루다보면 BUM 트래픽이라는 용어를 사용하는 경우가 있는데 BUM은 B(Broadcast), U(Unknown Unicast), M(Multicast)을 지칭하는데 B, U, M은 서로 다른 종류의 트래픽이지만 네트워크에서의 동작은 유사
- Unknown Unicast는 목적지 주소가 명확히 명시되어 있지만 네트워크에서의 동작은 브로드캐스트와 유사한데 스위치가 목적지에 대한 주소를 학습하지 못한 상황이어서 스위치는 패킷을 모든 포트로 플러딩하는데 이런 유니캐스트가 Unknown Unicast
실제로 동작하는 방식은 Broadcast 와 유사
- 네트워크 자원을 쓸데없이 사용하므로 네트워크 상에서 불필요한 BUM 트랙픽이 많아지면 네트워크 성능이 저하 될 수 있음
- 이더넷 환경에서는 ARP Broadcast를 먼저 보내고 이후 통신을 시작하므로 BUM 트래픽이 많이 발생하지 않음 

### 2) MAC Address

- MAC Address 체계

- MAC Address는 변경할 수 없도록 하드웨어에 고정되어 출하되므로 네트워크 구성 요소마다 다른 주소를 가짐
- 모든 네트워크 장 제조업체에서 장비가 출하될 때 마다 MAC 주소를 할당하게 되는데 매번 이 주소의 할당 여부를 확인할 수 없으므로 한 제조업체에 하나 이상의 주소 풀을 주고 그 풀 안에서 각 제조업체가 자체적으로 MAC 주소를 할당
- 네트워크 장비 제조업체에 주소 풀을 할당하는 것을 제조사 코드라고 하고 이 주소는 IEEE가 관리
- MAC Address는 48비트의 16진수 12자리로 표현
- 앞의 24비트와 뒤의 24비트로 나누어 구분하는데 제조사 코드가 MAC 주소 앞의 24비트인 OUI 값이고 뒤의 24비트의 값인 UAA는 각 제조사에서 자체적으로 할당하여 네트워크에서 각 장비를 구분하게 함

- 유일하지 않은 MAC 주소
네트워크 장비 제조업체는 자신의 제조업체 코드 내에서 뒤의 24비트의 UAA 값을 할당하는데 실수나 의도적으로 MAC 주소가 중복될 수 있음

MAC 주소는 동일 네트워크에서만 중복되지 않으면 동작하는데 아무런 문제가 없음

MAC 주소는 동일 네트워크 안에서 통신할 때 만 사요

네트워크 통신을 할 때 네트워크가 달라서 라우터의 도움을 받아야 한다면 라우터에서 다른 네트워크로 넘겨줄 때 출발지 와 도착지 의 MAC 주소가 변경되므로 네트워크를 넘어가면 기존 출발지 와 도착지 MAC 주소를 유지하지 않음

- MAC 주소 변경
MAC 주소는 BIA(Burned In Address) 상태로 NIC에 하랑

일반적으로 ROM 형태로 고정되어 출하되므로 NIC에 고정된 MAC 주소를 변경하기는 어렵지만 결국 이 MAC 주소도 메모리에 적재되어 구동되므로 여러가지 방법을 이용해서 변경된 MAC 주소로 NIC를 동작시킬 수 있습니다.

보안상의 이유로 MAC 주소 변경을 막아놓은 운영체제도 있지만 손쉽게 명령어나 설정 파일 변경만으로 MAC 주소를 변경할 수 있는 운영체제도 있습니다.

윈도우즈의 경우는 Driver 상세 정보에서 MAC 주소 변경을 제공하기 때문에 쉽게 변경이 가능
리눅스는 GNU Macchanger 나 리눅스 배포판의 네트워크 설정 파일에 MAC 주소를 입력하면 주소 변경이 가능

